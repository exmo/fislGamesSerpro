<!DOCTYPE html>
<html>
<head>
<title>PhoneGap</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="javascripts/jquery-1.9.0.min.js"></script>
<script src="javascripts/jquery.mobile-1.3.1.min.js"></script>
<link rel="stylesheet" href="stylesheets/jquery.mobile-1.3.1.min.css">
</head>
<body>
	<div data-role="page" id="pageCadastro">
		<div data-role="header">
			<h1>FISL GAMES</h1>
		</div>
		<div data-role="content">


			<form id="formCadastro">
				<div data-role="fieldcontain">
					<label for="email">E-mail</label> <input type="email" id="email"
						required>
				</div>
				<div data-role="fieldcontain">
					<label for="nome">Nome</label> <input type="text" id="nome"
						required>
				</div>
				<input type="button" id="cadastrar" value="Cadastrar" />
			</form>


		</div>
		<div data-role="footer">
			<h4>SERPRO</h4>
		</div>
	</div>

	<div data-role="page" id="pageLista">
		<div data-role="header">
			<h1>FISL GAMES</h1>
		</div>
		<div data-role="content">

			<button id="btLerQRCode">Ler QR Code</button>

			<ul id="listaQRCode">

			</ul>


		</div>
		<div data-role="footer">
			<h4>SERPRO</h4>
		</div>
	</div>



</body>

<script>
	$(function() {

		$("#cadastrar").click(submeterCadastro);

		$("#btLerQRCode").click(lerQRCode);

	})

	function lerQRCode() {
		alert("Abrir o leitor de serge");
	}

	function submeterCadastro() {
		var request = $
				.ajax(
						{
							dataType : "json",
							url : "https://agajorte.appspot.com/restituicaoirpf/2012/50765795515",
							type : 'GET',
							//data: reqbody,
							dataType : 'text',
							beforeSend : function(request) {
								request.overrideMimeType("application/json; charset=utf-8");
								//request.setRequestHeader("SOAPAction", "http://webservice/" + this.methodName);
							},
							failure : function(response, textStatus) {
								alert("Request failed: " + textStatus);
							}
						}).done(function(data) {
					alert('cabou:' + data)
				});
	}
	
	function submeterCadastroOld() {

		//$.ajax("http://localhost:9000/usuario/criar/"+$("#email").val()+"/"+$("#nome").val(), {
		$.ajax("https://agajorte.appspot.com/restituicaoirpf/2012/50765795515",
				{

					dataType : 'json',
					success : function(data) {
						console.log(data);
						alert("ok");
						$.mobile.changePage("#pageLista", {
							transition : 'fade'
						});
					},
					error : function(e) {
						alert("qqq");
						console.log(e);
					}
				});
	}
</script>


</html>
